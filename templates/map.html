{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map {
            height: 500px; /* Set the height of the map */
            width: 100%;   /* Full width */
        }
    </style>
{% endblock %}
{% block content %}


    <div class="container-fluid py-4">

<div id="map"></div>

    <script>
        // Initialize the map
        var map = L.map('map').setView([20, 0], 2); // Default view (center of the world)

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Fetch locations from the Flask API
        fetch('/api/locations')
            .then(response => response.json())
            .then(data => {
                // Add a marker for each location
                data.forEach(location => {
                    L.marker([location.latitude, location.longitude])
                        .addTo(map)
                        .bindPopup(`<b>${location.name}</b>`);
                });
            })
            .catch(error => console.error('Error fetching locations:', error));
    </script>


{% endblock %}